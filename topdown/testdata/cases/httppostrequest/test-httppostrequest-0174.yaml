cases:
- data: {}
  modules:
  - |
    package generated

    clean_headers(__local0__) = cleaned {
      json.remove(__local0__, ["headers/date"], __local3__)
      cleaned = __local3__
    }

    remove_headers(__local1__) = no_headers {
      object.remove(__local1__, ["headers"], __local4__)
      no_headers = __local4__
    }

    p = __local2__ {
      http.send({"headers": {"content-type": "application/x-www-form-encoded"}, "method": "post", "raw_body": {"bar": "bar"}, "url": "http://127.0.0.1:38847"}, resp)
      data.generated.clean_headers(resp, __local5__)
      __local2__ = __local5__
    }
  note: httppostrequest/raw_body bad type
  query: data.generated.p = x
  want_error: '"raw_body" must be a string'
  want_error_code: eval_builtin_error
