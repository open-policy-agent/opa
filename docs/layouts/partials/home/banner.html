{{ $localMode   := eq (getenv "ENV") "local" }}
{{ $title       := site.Title }}
{{ $description := site.Params.description }}
{{ $tagline     := site.Params.tagline }}
{{ $socialMenu  := site.Menus.social }}
{{ $latest      := index site.Data.releases 0 }}
{{ $docs        := cond $localMode "/docs" (printf "/docs/v%s" $latest) }}
{{ $getStarted  := cond $localMode "/docs/get-started" (printf "/docs/v%s/get-started" $latest) }}
<header role="banner">
  <nav class="nav--banner" role="navigation">
    <ul class="nav--menu">
      <li class="nav--menu-item nav--home">
        <a href="/">
          {{ site.Title }}
        </a>
      </li>

      <li class="nav--menu-item nav--docs">
        <a href="{{ $docs }}" rel="help">
          Documentation
        </a>
      </li>

      <li class="nav--menu-item nav--docs">
        <a href="{{ $getStarted }}" rel="help">
          Tutorials
        </a>
      </li>

      <li class="nav--menu-item nav--docs">
        <a href="https://play.openpolicyagent.org" rel="help" target="_blank">
          Playground
        </a>
      </li>
    </ul>
    <ul class="nav--menu">
      {{ range $socialMenu }}
      <li class="nav--menu-item nav--social">
        <a href="{{ .URL }}" rel="external">
          <svg class="nav--social-icon">
            <title>
              {{ .Name }}
            </title>
            <use xlink:href="#social-icon--{{ lower .Name }}" />
          </svg>
        </a>
      </li>
      {{ end }}
    </ul>
  </nav>

  <div class="headline">
    <div class="content">
      <h1 class="headline--title">
        {{ $description }}
      </h1>
      <p class="headline--subtitle">
        {{ $tagline }}
      </p>

      <p class="headline--nav">
        <a id="headline--get-started" href="{{ $getStarted }}" rel="help">
          Get started
        </a>

        <a id="headline--learn-more" href="{{ $docs }}" rel="help">
          Learn more
        </a>
      </p>
    </div>

    <div class="headline--wave--bg" role="presentation"></div>
    <div class="headline--wave--fg" role="presentation"></div>
  </div>
</header>