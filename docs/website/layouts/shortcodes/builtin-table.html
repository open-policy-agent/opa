
{{- $cat := .Get 0 }}
{{ if .IsNamedParams }}{{- $cat = .Get "cat" }}{{- end }}
{{- $id := $cat }}
{{- $title := $cat }}
{{- if .Get "id" }}{{ $id = .Get "id" }}{{ end }}
{{- if .Get "title" }}{{ $title = .Get "title" }}{{ end }}
<h3 id={{ $id }}>{{ $title | title }}</h3>
<table>
    <thead>
    <tr>
    <th>Built-in</th>
    <th>Description</th>
    <th>Details</th>
    </tr>
    </thead>
    <tbody>
    {{- range $name := index site.Data.builtin_metadata._categories $cat }}
    {{- $bi := index site.Data.builtin_metadata $name }}
    <tr>
        <td>
            {{- if isset $bi "infix" }}
            <span class="opa-keep-it-together">
                <code>
                {{ $bi.result.name }} := {{ index (index $bi.args 0) "name" }} {{ $bi.infix }} {{ index (index $bi.args 1) "name" }}
                </code>
            </span>
            {{- else }}
                <span class="opa-keep-it-together">
                    <code>
                    {{ $bi.result.name }} := {{ $name }}(
                    {{- range $index, $element := $bi.args -}}
                    {{- if gt $index 0 -}}, {{ end -}}
                    {{- $element.name -}}
                    {{- end -}}
                    )
                    </code>
                </span>
            {{- end }}
        </td>
        <td>
            {{ $bi.description | markdownify }}

            <dl class="bi-args">
            {{- range $element := $bi.args }}
                <dt><code>{{ $element.name }}</code></dt>
                <dd>({{ $element.type }}) {{ $element.description | markdownify }}</dd>
            {{- end }}
            </dl>

            <emph>Returns:</emph>
            <dl class="bi-args">
                <dt><code>{{ $bi.result.name }}</code></dt>
                <dd>({{ $bi.result.type }}) {{ $bi.result.description | markdownify }}</dd>
            </dl>
        </td>
        <td>
            <div class="tags">
                {{- if ne $bi.introduced "v0.17.0" }}
                <a href="https://github.com/open-policy-agent/opa/releases/{{ $bi.introduced }}" target="_blank">
                    <span class="tag is-light">{{ $bi.introduced }}</span>
                </a>
                {{- end }}
                {{- if index $bi "wasm" -}}
                    <span class="tag is-success">Wasm</span>
                {{- else -}}
                    <span class="tag is-warning">SDK-dependent</span>
                {{- end -}}
            </div>
        </td>
    </tr>
    {{- end }}
    </tbody>
</table>